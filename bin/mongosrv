#!/usr/bin/env node
// Generated by LiveScript 1.3.1
(function(){
  var existsSync, ref$, exec, which, yamlfile, mkdirp, mongodir, hostname, new_mongodir;
  existsSync = require('fs').existsSync;
  ref$ = require('shelljs'), exec = ref$.exec, which = ref$.which;
  yamlfile = require('yamlfile');
  mkdirp = require('mkdirp');
  if (!which('mongod')) {
    console.log('missing mongod command');
    process.exit();
  }
  mongodir = 'mongodata';
  if (existsSync('.mongosrv.yaml')) {
    hostname = exec('hostname').output.trim();
    new_mongodir = yamlfile.readFileSync('.mongosrv.yaml')[hostname];
    if (new_mongodir != null) {
      mongodir = new_mongodir;
    }
  }
  if (!existsSync(mongodir)) {
    console.log('creating mongodata directory');
    mkdirp.sync(mongodir);
  }
  exec("mongod --dbpath " + mongodir, {
    async: true
  });
}).call(this);
